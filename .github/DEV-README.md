## Development

- Add a `.env` to the project's root:

```
NEXT_PUBLIC_BASE_URL=https://webosumania.com

# Get these values by following #Supabase
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=

# Get these values by following these instructions: https://osu.ppy.sh/docs/index.html#registering-an-oauth-application
OSU_API_CLIENT_ID=
OSU_API_CLIENT_SECRET=
```

- Install NPM packages with `npm install`
- Run with `npm run dev`
- Open in browser at [http://localhost:3000](http://localhost:3000)


# Supabase
Before using supabase there is a little bit of setup that needs to be done.

1. Create a supabase db
    Once created it should give you the db url and anon key.
    If not you can find it under `Project Settings -> Data API`

2. Creating the DB, you can manually create it (or you can paste the following SQL command in the SQL Editor)
```sql
create table data (
  id bigint generated by default as identity primary key,
  uuid uuid references auth.users not null,
  settings_and_keybinds jsonb,
  high_scores_and_replays jsonb,
  saved_beatmap_sets jsonb
);
```
3. Add RLS Policies
```sql
alter table data enable row level security;
create policy "Users can manage their own data." on data for
    ALL using ((select auth.uid()) = uuid);
```

4. Add OAuth options under `Authentication -> Sign In / Providers`
    Once OAuth's are added, make sure to add them to the `A_OAuth` const in `/src/components/auth/Account.tsx`

5. Under `Authentication -> URL` Configuration add webosumania.com as the default URL and the other proxy urls under Redirect URLs

## Adding Resend to the Supabase Project.
(Optional but highly recomended)

Since supabase highly limits the emails it will send to 1 email every 3 minutes so its not recommended.
Luckily we can use Resend with a 100 emails per day limit.

To integrate Resend with Supabase follow [this](https://resend.com/supabase).